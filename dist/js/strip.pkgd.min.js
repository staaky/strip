/*!
 * Strip - An Unobtrusive Responsive Lightbox - v1.8.0
 * (c) 2014-2021 Nick Stakenburg
 *
 * https://github.com/staaky/strip
 *
 * @license: https://creativecommons.org/licenses/by/4.0
 */
!function(i,t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):i.Strip=t(jQuery)}(this,function($){var Strip={version:"1.8.0",Skins:{strip:{}}},Browser=(c=navigator.userAgent,{IE:!(!window.attachEvent||-1!==c.indexOf("Opera"))&&d("MSIE "),Opera:-1<c.indexOf("Opera")&&(!!window.opera&&opera.version&&parseFloat(opera.version())||7.55),WebKit:-1<c.indexOf("AppleWebKit/")&&d("AppleWebKit/"),Gecko:-1<c.indexOf("Gecko")&&-1===c.indexOf("KHTML")&&d("rv:"),MobileSafari:!!c.match(/Apple.*Mobile.*Safari/),Chrome:-1<c.indexOf("Chrome")&&d("Chrome/"),ChromeMobile:-1<c.indexOf("CrMo")&&d("CrMo/"),Android:-1<c.indexOf("Android")&&d("Android "),IEMobile:-1<c.indexOf("IEMobile")&&d("IEMobile/")}),c;function d(i){i=new RegExp(i+"([\\d.]+)").exec(c);return!i||parseFloat(i[1])}var _slice=Array.prototype.slice,Fit={within:function(i,t){for(var e=$.extend({height:!0,width:!0},arguments[2]||{}),s=$.extend({},t),n=5,o=e.width,h=e.height;0<n&&(o&&s.width>i.width||h&&s.height>i.height);){var a=1,r=1;o&&s.width>i.width&&(a=i.width/s.width),h&&s.height>i.height&&(r=i.height/s.height);var d=Math.min(a,r),s={width:Math.round(t.width*d),height:Math.round(t.height*d)};n--}return s.width=Math.max(s.width,0),s.height=Math.max(s.height,0),s}};$.extend($.easing,{stripEaseInCubic:function(i,t,e,s,n){return s*(t/=n)*t*t+e},stripEaseInSine:function(i,t,e,s,n){return-s*Math.cos(t/n*(Math.PI/2))+s+e},stripEaseOutSine:function(i,t,e,s,n){return s*Math.sin(t/n*(Math.PI/2))+e}});var Support=(F=document.createElement("div"),G="Webkit Moz O ms Khtml".split(" "),{css:{animation:J("animation"),transform:J("transform"),prefixed:function(i){return J(i,"prefix")}},svg:!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,touch:function(){try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}catch(i){return!1}}()}),F,G;function J(i,t){var e=i.charAt(0).toUpperCase()+i.substr(1);return function(i,t){for(var e in i)if(void 0!==F.style[i[e]])return"prefix"!=t||i[e];return!1}((i+" "+G.join(e+" ")+e).split(" "),t)}Support.mobileTouch=Support.touch&&(Browser.MobileSafari||Browser.Android||Browser.IEMobile||Browser.ChromeMobile||!/^(Win|Mac|Linux)/.test(navigator.platform));var Bounds={viewport:function(){var i,t={width:$(window).width()};return Browser.MobileSafari||Browser.Android&&Browser.Gecko?(i=document.documentElement.clientWidth/window.innerWidth,t.height=window.innerHeight*i):t.height=$(window).height(),t}},ImageReady=function(s){function i(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}s.extend(i.prototype,{initialize:function(){this.options=s.extend({test:function(){},success:function(){},timeout:function(){},callAt:!1,intervals:[[0,0],[1e3,10],[2e3,50],[4e3,100],[2e4,500]]},arguments[0]||{}),this._test=this.options.test,this._success=this.options.success,this._timeout=this.options.timeout,this._ipos=0,this._time=0,this._delay=this.options.intervals[this._ipos][1],this._callTimeouts=[],this.poll(),this._createCallsAt()},poll:function(){this._polling=setTimeout(function(){if(this._test())this.success();else{if(this._time+=this._delay,this._time>=this.options.intervals[this._ipos][0]){if(!this.options.intervals[this._ipos+1])return void("function"==typeof this._timeout&&this._timeout());this._ipos++,this._delay=this.options.intervals[this._ipos][1]}this.poll()}}.bind(this),this._delay)},success:function(){this.abort(),this._success()},_createCallsAt:function(){this.options.callAt&&s.each(this.options.callAt,function(i,t){var e=t[0],s=t[1],e=setTimeout(function(){s()}.bind(this),e);this._callTimeouts.push(e)}.bind(this))},_stopCallTimeouts:function(){s.each(this._callTimeouts,function(i,t){clearTimeout(t)}),this._callTimeouts=[]},abort:function(){this._stopCallTimeouts(),this._polling&&(clearTimeout(this._polling),this._polling=null)}});function t(){return this.initialize.apply(this,Array.prototype.slice.call(arguments))}return s.extend(t.prototype,{supports:{naturalWidth:"naturalWidth"in new Image},initialize:function(i,t,e){this.img=s(i)[0],this.successCallback=t,this.errorCallback=e,this.isLoaded=!1,this.options=s.extend({method:"onload",pollFallbackAfter:1e3},arguments[3]||{}),"onload"!=this.options.method&&this.supports.naturalWidth?this.poll():this.load()},poll:function(){this._poll=new i({test:function(){return 0<this.img.naturalWidth}.bind(this),success:function(){this.success()}.bind(this),timeout:function(){this.error()}.bind(this),callAt:[[this.options.pollFallbackAfter,function(){this.load()}.bind(this)]]})},load:function(){this._loading=setTimeout(function(){var i=new Image;(this._onloadImage=i).onload=function(){i.onload=function(){},this.supports.naturalWidth||(this.img.naturalWidth=i.width,this.img.naturalHeight=i.height,i.naturalWidth=i.width,i.naturalHeight=i.height),this.success()}.bind(this),i.onerror=this.error.bind(this),i.src=this.img.src}.bind(this))},success:function(){this._calledSuccess||(this._calledSuccess=!0,this.abort(),this.waitForRender(function(){this.isLoaded=!0,this.successCallback(this)}.bind(this)))},error:function(){this._calledError||(this._calledError=!0,this.abort(),this._errorRenderTimeout=setTimeout(function(){this.errorCallback&&this.errorCallback(this)}.bind(this)))},abort:function(){this.stopLoading(),this.stopPolling(),this.stopWaitingForRender()},stopPolling:function(){this._poll&&(this._poll.abort(),this._poll=null)},stopLoading:function(){this._loading&&(clearTimeout(this._loading),this._loading=null),this._onloadImage&&(this._onloadImage.onload=function(){},this._onloadImage.onerror=function(){})},waitForRender:function(i){this._renderTimeout=setTimeout(i)},stopWaitingForRender:function(){this._renderTimeout&&(clearTimeout(this._renderTimeout),this._renderTimeout=null),this._errorRenderTimeout&&(clearTimeout(this._errorRenderTimeout),this._errorRenderTimeout=null)}}),t}(jQuery);function Spinner(){return this.initialize.apply(this,_slice.call(arguments))}function Timers(){return this.initialize.apply(this,_slice.call(arguments))}function getURIData(e){var s={type:"image"};return $.each(Types,function(i,t){t=t.data(e);t&&((s=t).type=i,s.url=e)}),s}function detectExtension(i){i=(i||"").replace(/\?.*/g,"").match(/\.([^.]{3,4})$/);return i?i[1].toLowerCase():null}Spinner.supported=Support.css.transform&&Support.css.animation,$.extend(Spinner.prototype,{initialize:function(i){this.element=$(i),this.element[0]&&(this.classPrefix="strp-",this.setOptions(arguments[1]||{}),this.element.addClass(this.classPrefix+"spinner"),this.element.append(this._rotate=$("<div>").addClass(this.classPrefix+"spinner-rotate")),this.build(),this.start())},setOptions:function(i){this.options=$.extend({show:200,hide:200},i||{})},build:function(){if(!this._build){this._rotate.html("");this.options.length,this.options.radius;var i=this.element.is(":visible");i||this.element.show(),this._rotate.append(s=$("<div>").addClass(this.classPrefix+"spinner-frame").append(n=$("<div>").addClass(this.classPrefix+"spinner-line")));var t,e=parseInt($(n).css("z-index"));this.lines=e,n.css({"z-index":"inherit"}),s.remove(),i||this.element.hide();for(var s,n,o=0;o<e;o++){this._rotate.append(s=$("<div>").addClass(this.classPrefix+"spinner-frame").append(n=$("<div>").addClass(this.classPrefix+"spinner-line"))),t=t||n.css("color"),n.css({background:t}),s.css({opacity:(1/e*(o+1)).toFixed(2)});var h={};h[Support.css.prefixed("transform")]="rotate("+360/e*(o+1)+"deg)",s.css(h)}this._build=!0}},start:function(){var i={};i[Support.css.prefixed("animation")]=this.classPrefix+"spinner-spin 1s infinite steps("+this.lines+")",this._rotate.css(i)},stop:function(){var i={};i[Support.css.prefixed("animation")]="none",this._rotate.css(i)},show:function(i){this.build(),this.start(),this.element.stop(!0).fadeTo(this.options.show,1,i)},hide:function(i){this.element.stop(!0).fadeOut(this.options.hide,function(){this.stop(),i&&i()}.bind(this))},refresh:function(){this._build=!1,this.build()}}),$.extend(Timers.prototype,{initialize:function(){this._timers={}},set:function(i,t,e){this._timers[i]=setTimeout(t,e)},get:function(i){return this._timers[i]},clear:function(i){i?this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]):this.clearAll()},clearAll:function(){$.each(this._timers,function(i,t){clearTimeout(t)}),this._timers={}}});var Types={image:{extensions:"bmp gif jpeg jpg png webp",detect:function(i){return-1<$.inArray(detectExtension(i),this.extensions.split(" "))},data:function(i){return!!this.detect()&&{extension:detectExtension(i)}}},youtube:{detect:function(i){var t=/(youtube\.com|youtu\.be)\/watch\?(?=.*vi?=([a-zA-Z0-9-_]+))(?:\S+)?$/.exec(i);return t&&t[2]?t[2]:!(!(t=/(youtube\.com|youtu\.be)\/(vi?\/|u\/|embed\/)?([a-zA-Z0-9-_]+)(?:\S+)?$/i.exec(i))||!t[3])&&t[3]},data:function(i){i=this.detect(i);return!!i&&{id:i}}},vimeo:{detect:function(i){i=/(vimeo\.com)\/([a-zA-Z0-9-_]+)(?:\S+)?$/i.exec(i);return!(!i||!i[2])&&i[2]},data:function(i){i=this.detect(i);return!!i&&{id:i}}}},VimeoReady=function(){function i(){return this.initialize.apply(this,_slice.call(arguments))}$.extend(i.prototype,{initialize:function(i,t){this.url=i,this.callback=t,this.load()},load:function(){var i=e.get(this.url);if(i)return this.callback(i.data);var t="http"+(window.location&&"https:"==window.location.protocol?"s":"")+":",i=getURIData(this.url).id;this._xhr=$.getJSON(t+"//vimeo.com/api/oembed.json?url="+t+"//vimeo.com/"+i+"&maxwidth=9999999&maxheight=9999999&callback=?",function(i){i={dimensions:{width:i.width,height:i.height}};e.set(this.url,i),this.callback&&this.callback(i)}.bind(this))},abort:function(){this._xhr&&(this._xhr.abort(),this._xhr=null)}});var e={cache:[],get:function(i){for(var t=null,e=0;e<this.cache.length;e++)this.cache[e]&&this.cache[e].url==i&&(t=this.cache[e]);return t},set:function(i,t){this.remove(i),this.cache.push({url:i,data:t})},remove:function(i){for(var t=0;t<this.cache.length;t++)this.cache[t]&&this.cache[t].url==i&&delete this.cache[t]}};return i}(),Options={defaults:{effects:{spinner:{show:200,hide:200},transition:{min:175,max:250},ui:{show:0,hide:200},window:{show:300,hide:300}},hideOnClickOutside:!0,keyboard:{left:!0,right:!0,esc:!0},loop:!0,overlap:!0,preload:[1,2],position:!0,skin:"strip",side:"right",spinner:!0,toggle:!0,uiDelay:3e3,vimeo:{autoplay:1,api:1,title:1,byline:1,portrait:0,loop:0},youtube:{autoplay:1,controls:1,enablejsapi:1,hd:1,iv_load_policy:3,loop:0,modestbranding:1,rel:0,vq:"hd1080"},initialTypeOptions:{image:{},vimeo:{width:1280},youtube:{width:1280,height:720}}},create:function(i,t,e){e=e||{},(i=i||{}).skin=i.skin||this.defaults.skin;e=i.skin?$.extend({},Strip.Skins[i.skin]||Strip.Skins[this.defaults.skin]):{},e=$.extend(!0,{},this.defaults,e);e.initialTypeOptions&&delete(e=t&&e.initialTypeOptions[t]?$.extend(!0,{},e.initialTypeOptions[t],e):e).initialTypeOptions;var s=$.extend(!0,{},e,i);return(!s.effects||Browser.IE&&Browser.IE<9)&&(s.effects={},$.each(this.defaults.effects,function(t,i){$.each(s.effects[t]=$.extend({},i),function(i){s.effects[t][i]=0})}),s.spinner=!1),s.keyboard&&("boolean"==typeof s.keyboard&&(s.keyboard={},$.each(this.defaults.keyboard,function(i,t){s.keyboard[i]=!0})),"vimeo"!==t&&"youtube"!==t||$.extend(s.keyboard,{left:!1,right:!1})),"vimeo"!==t&&"youtube"!==t||(s.overlap=!1),s}};function View(){this.initialize.apply(this,_slice.call(arguments))}$.extend(View.prototype,{initialize:function(object){var options=arguments[1]||{},data={},element,data;return"string"==typeof object?object={url:object}:object&&1===object.nodeType&&(element=$(object),object={element:element[0],url:element.attr("href"),caption:element.attr("data-strip-caption"),group:element.attr("data-strip-group"),extension:element.attr("data-strip-extension"),type:element.attr("data-strip-type"),options:element.attr("data-strip-options")&&eval("({"+element.attr("data-strip-options")+"})")||{}}),object&&(object.extension||(object.extension=detectExtension(object.url)),object.type||(data=getURIData(object.url),object._data=data,object.type=data.type)),object._data||(object._data=getURIData(object.url)),object&&object.options?object.options=$.extend(!0,$.extend({},options),$.extend({},object.options)):object.options=$.extend({},options),object.options=Options.create(object.options,object.type,object._data),$.extend(this,object),this}});var Pages={initialize:function(i){this.element=i,this.pages={},this.uid=1},add:function(i){this.uid++,this.views=i,this.pages[this.uid]=[],Window._showUIOnResize=!0,$.each(i,function(i,t){this.pages[this.uid].push(new Page(t,i+1,this.views.length))}.bind(this))},show:function(i,t){i=this.pages[this.uid][i-1];this.page&&this.page.uid==i.uid?i.view.options.toggle&&(Window.hide(),this.page=null):(Pages.setActiveClass(i),this.page=i,this.removeHiddenAndLoadingInactive(),i.show(function(){this._switched=!1,t&&t()}.bind(this)))},getLoadingCount:function(){var e=0;return $.each(this.pages,function(i,t){$.each(t,function(i,t){t.loading&&e++})}),e},getPositionInActivePageGroup:function(e){var s=0,i=this.pages[this.uid];return i&&$.each(i,function(i,t){t.view.element&&t.view.element==e&&(s=i+1)}),s},removeExpired:function(e){$.each(this.pages,function(i,t){i!=this._id&&$.each(t,function(i,t){t.remove(e)})})},removeAll:function(){$.each(this.pages,function(i,t){$.each(t,function(i,t){t.remove()})}),this.pages={}},hideVisibleInactive:function(e){$.each(this.pages,function(i,t){$.each(t,function(i,t){t.uid!=this.page.uid&&t.hide(null,e)}.bind(this))}.bind(this))},stopInactive:function(){$.each(this.pages,function(i,t){$.each(t,function(i,t){t.uid==this.page.uid||t.preloading||t.stop()}.bind(this))}.bind(this))},removeHiddenAndLoadingInactive:function(){var s=[];$.each(this.pages,function(i,t){var e;i!=this.uid&&(e=0,$.each(t,function(i,t){t.visible&&!t.loading||t.animatingWindow||t.remove(),t.removed&&e++}.bind(this)),e==t.length&&s.push(i))}.bind(this)),$.each(s,function(i,t){delete this.pages[t]}.bind(this))},stop:function(){$.each(this.pages,function(i,t){$.each(t,function(i,t){t.stop()})})},setActiveClass:function(i){this.removeActiveClasses();i=i.view.element;i&&($(i).addClass("strip-active-element strip-active-group"),(i=$(i).attr("data-strip-group"))&&$('.strip[data-strip-group="'+i+'"]').addClass("strip-active-group"))},removeActiveClasses:function(){$(".strip-active-group").removeClass("strip-active-group strip-active-element")}},Page=(sb=0,tb={},$.extend(ub.prototype,{initialize:function(i,t,e){this.view=i,this.dimensions={width:0,height:0},this.uid=sb++,this._position=t,this._total=e,this.animated=!1,this.visible=!1,this.queues={},this.queues.showhide=$({})},create:function(){if(!this._created){Pages.element.append(this.element=$("<div>").addClass("strp-page").append(this.container=$("<div>").addClass("strp-container")).css({opacity:0}).hide());var i=this.view.options.position&&1<this._total;switch((this.view.caption||i)&&(this.element.append(this.info=$("<div>").addClass("strp-info").append(this.info_padder=$("<div>").addClass("strp-info-padder"))),i&&(this.element.addClass("strp-has-position"),this.info_padder.append($("<div>").addClass("strp-position").html(this._position+" / "+this._total))),this.view.caption&&this.info_padder.append(this.caption=$("<div>").addClass("strp-caption").html(this.view.caption))),this.view.type){case"image":this.container.append(this.content=$("<img>").attr({src:this.view.url}));break;case"vimeo":case"youtube":this.container.append(this.content=$("<div>"))}this.element.addClass("strp"+(this.view.options.overlap?"":"-no")+"-overlap"),this._total<2&&this.element.addClass("strp-no-sides"),this.content.addClass("strp-content-element"),this._created=!0}},_getSurroundingPages:function(){var i;if(!(i=this.view.options.preload))return[];for(var t=[],e=Math.max(1,this._position-i[0]),s=Math.min(this._position+i[1],this._total),n=this._position,o=n;o<=s;o++)(h=Pages.pages[Pages.uid][o-1])._position!=n&&t.push(h);for(var h,o=n;e<=o;o--)(h=Pages.pages[Pages.uid][o-1])._position!=n&&t.push(h);return t},preloadSurroundingImages:function(){var i=this._getSurroundingPages();$.each(i,function(i,t){t.preload()}.bind(this))},preload:function(){this.preloading||this.preloaded||"image"!==this.view.type||!this.view.options.preload||this.loaded||(this.create(),this.preloading=!0,new ImageReady(this.content[0],function(i){this.loaded=!0,this.preloading=!1,this.preloaded=!0,this.dimensions={width:i.img.naturalWidth,height:i.img.naturalHeight}}.bind(this),null,{method:"naturalWidth"}))},load:function(t,i){if(this.create(),this.loaded)t&&t();else switch(this.abort(),this.loading=!0,this.view.options.spinner&&!tb[this.view.url]&&Window.startLoading(),this.view.type){case"image":if(this.error)return void(t&&t());this.imageReady=new ImageReady(this.content[0],function(i){this._markAsLoaded(),this.dimensions={width:i.img.naturalWidth,height:i.img.naturalHeight},t&&t()}.bind(this),function(){this._markAsLoaded(),this.content.hide(),this.container.append(this.error=$("<div>").addClass("strp-error")),this.element.addClass("strp-has-error"),this.dimensions={width:this.error.outerWidth(),height:this.error.outerHeight()},t&&t()}.bind(this),{method:"naturalWidth"});break;case"vimeo":this.vimeoReady=new VimeoReady(this.view.url,function(i){this._markAsLoaded(),this.dimensions={width:i.dimensions.width,height:i.dimensions.height},t&&t()}.bind(this));break;case"youtube":this._markAsLoaded(),this.dimensions={width:this.view.options.width,height:this.view.options.height},t&&t()}},_markAsLoaded:function(){this.loading=!1,this.loaded=!0,tb[this.view.url]=!0,Window.stopLoading()},isVideo:function(){return/^(youtube|vimeo)$/.test(this.view.type)},insertVideo:function(i){var t,e;!this.playerIframe&&this.isVideo()&&(t="http"+(window.location&&"https:"===window.location.protocol?"s":"")+":",e=$.extend({},this.view.options[this.view.type]||{}),e=$.param(e),e={vimeo:t+"//player.vimeo.com/video/{id}?{queryString}",youtube:t+"//www.youtube.com/embed/{id}?{queryString}"}[this.view.type].replace("{id}",this.view._data.id).replace("{queryString}",e),this.content.append(this.playerIframe=$("<iframe webkitAllowFullScreen mozallowfullscreen allowFullScreen>").attr({src:e,height:this.contentDimensions.height,width:this.contentDimensions.width,frameborder:0}))),i&&i()},raise:function(){var i=Pages.element[0].lastChild;i&&i===this.element[0]||Pages.element.append(this.element)},show:function(t){var i=this.queues.showhide;i.queue([]),this.animated=!0,this.animatingWindow=!1,i.queue(function(i){Pages.stopInactive(),i()}),i.queue(function(i){Window.setSide(this.view.options.side,i)}.bind(this)),i.queue(function(i){this.view.options.spinner&&Window._spinner&&(Window.setSpinnerSkin(this.view.options.skin),Window._spinner.setOptions(this.view.options.effects.spinner),Window._spinner.refresh()),this.load(function(){this.preloadSurroundingImages(),i()}.bind(this))}.bind(this)),i.queue(function(i){this.raise(),Window.setSkin(this.view.options.skin),Window.bindUI(),Keyboard.enable(this.view.options.keyboard),this.fitToWindow(),i()}.bind(this)),i.queue(function(i){Window.timers.set("bind-hide-on-click-outside",function(){Window.bindHideOnClickOutside(),i()}.bind(this),1)}.bind(this)),this.isVideo()&&i.queue(function(i){this.insertVideo(function(){i()})}.bind(this)),i.queue(function(i){this.animatingWindow=!0;var t=3,e="horizontal"===this.getOrientation()?"width":"height",s=this.view&&this.view.options.onShow;"function"==typeof s&&s.call(Strip);e=Window.resize(this[e],function(){--t<1&&i()},void 0);this._show(function(){--t<1&&i()},e),Window.adjustPrevNext(function(){--t<1&&i()},e),Window._showUIOnResize&&(Window.showUI(null,e),Window._showUIOnResize=!1),Pages.hideVisibleInactive(e)}.bind(this)),i.queue(function(i){this.animatingWindow=!1,this.animated=!1,this.visible=!0,t&&t(),i()}.bind(this))},_show:function(i,t){t=Window.visible?"number"==typeof t?t:this.view.options.effects.transition.min:0;this.element.stop(!0).show().fadeTo(t||0,1,i)},hide:function(i,t){var e;this.element&&(this.removeVideo(),this.abort(),e=this.view.options.effects.transition.min,"number"==typeof t&&(e=t),this.isVideo()&&(e=0),this.element.stop(!0).fadeTo(e,0,"stripEaseInCubic",$.proxy(function(){this.element.hide(),this.visible=!1,i&&i()},this)))},stop:function(){this.queues.showhide.queue([]),this.element&&this.element.stop(!0),this.abort()},removeVideo:function(){this.playerIframe&&(this.playerIframe[0].src="//about:blank",this.playerIframe.remove(),this.playerIframe=null)},remove:function(){this.stop(),this.removeVideo(),this.element&&this.element.remove(),this.visible=!1,this.removed=!0},abort:function(){this.imageReady&&!this.preloading&&(this.imageReady.abort(),this.imageReady=null),this.vimeoReady&&(this.vimeoReady.abort(),this.vimeoReady=null),this.loading=!1,Window.stopLoading()},_getDimensionsFitToView:function(){var i=$.extend({},this.dimensions),t=$.extend({},this.dimensions),e=this.view.options;return e.maxWidth&&(i.width=e.maxWidth),e.maxHeight&&(i.heigth=e.maxHeight),Fit.within(i,t)},getOrientation:function(i){return"left"===this.view.options.side||"right"===this.view.options.side?"horizontal":"vertical"},fitToWindow:function(){var i=this.element,t=this._getDimensionsFitToView(),e=Bounds.viewport(),s=$.extend({},e),n="horizontal"===this.getOrientation()?"width":"height",o=i.find(".strp-container");Window.element.removeClass("strp-measured");var h=Window.element,a="width"==n?0<parseInt(h.css("min-width")):0<parseInt(h.css("min-height")),r=a?0:parseInt(h.css("margin-"+("width"==n?"left":"bottom")));Window.element.addClass("strp-measured"),s[n]-=r;var d=parseInt(o.css("padding-left"))+parseInt(o.css("padding-right")),l=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"));s.width-=d,s.height-=l;var u=Fit.within(s,t),p=$.extend({},u),c=this.content;this.error&&(c=this.error);var f=this.info,v=0;if(f){h=Window.element.is(":visible");h||Window.element.show();r=i.is(":visible");if(r||i.show(),"width"==n){i.css({width:a?e.width:u.width+d});var m=s.height;c.hide(),v=f.outerHeight(),c.show(),s.height=m-v;for(var w,g,b,p=Fit.within(s,t),_=$.extend({},p),y=v,x=a?0:4;0<x&&(b=u.width-p.width);)i.css({width:u.width+d-b}),g=v,c.hide(),v=f.outerHeight(),w=Math.max(this.caption?this.caption.outerWidth()+d:0,this.position?this.position.outerWidth()+d:0),c.show(),v===g&&w<=u.width+d-b?u.width-=b:(s.height=m-v,p=Fit.within(s,t),x-1<=0&&(i.css({width:u.width+d}),p=_,v=y)),x--}else Browser.IE&&Browser.IE<8&&i.css({width:e.width}),c.hide(),v=f.outerHeight(),c.show(),s.height-=v,p=Fit.within(s,t),u.height=p.height;r||i.hide(),h||Window.element.hide()}l={width:u.width+d,height:u.height+l+v};a&&(l=e),"width"==n?i.css({width:l.width}):i.css({height:l.height}),o.css({bottom:v});e=-.5*p.width,o=-.5*p.height;Browser.IE&&Browser.IE<8&&(e=Math.floor(e),o=Math.floor(o)),c.css($.extend({},p,{"margin-left":e,"margin-top":o})),this.playerIframe&&this.playerIframe.attr(p),this.contentDimensions=p,this.width=l.width,this.height=l.height,this.z=this[n]}}),ub),sb,tb;function ub(){return this.initialize.apply(this,_slice.call(arguments))}var Window={initialize:function(){this.queues=[],this.queues.hide=$({}),this.pages=[],this.timers=new Timers,this.build(),this.setSkin(Options.defaults.skin)},build:function(){Spinner.supported&&($(document.body).append(this.spinnerMove=$("<div>").addClass("strp-spinner-move").hide().append(this.spinner=$("<div>").addClass("strp-spinner"))),this._spinner=new Spinner(this.spinner),this._spinnerMoveSkinless=this.spinnerMove[0].className),$(document.body).append(this.element=$("<div>").addClass("strp-window strp-measured").append(this._pages=$("<div>").addClass("strp-pages")).append(this._previous=$("<div>").addClass("strp-nav strp-nav-previous").append($("<div>").addClass("strp-nav-button").append($("<div>").addClass("strp-nav-button-background")).append($("<div>").addClass("strp-nav-button-icon"))).hide()).append(this._next=$("<div>").addClass("strp-nav strp-nav-next").append($("<div>").addClass("strp-nav-button").append($("<div>").addClass("strp-nav-button-background")).append($("<div>").addClass("strp-nav-button-icon"))).hide()).append(this._close=$("<div>").addClass("strp-close").append($("<div>").addClass("strp-close-background")).append($("<div>").addClass("strp-close-icon")))),Pages.initialize(this._pages),Support.mobileTouch&&this.element.addClass("strp-mobile-touch"),Support.svg||this.element.addClass("strp-no-svg"),this._close.on("click",function(i){i.preventDefault(),this.hide()}.bind(this)),this._previous.on("click",function(i){this.previous(),this._onMouseMove(i)}.bind(this)),this._next.on("click",function(i){this.next(),this._onMouseMove(i)}.bind(this)),this.hideUI(null,0)},setSkin:function(i){this._skin&&this.element.removeClass("strp-window-skin-"+this._skin),this.element.addClass("strp-window-skin-"+i),this._skin=i},setSpinnerSkin:function(i){this.spinnerMove&&(this._spinnerSkin&&this.spinnerMove.removeClass("strp-spinner-move-skin-"+this._spinnerSkin),this.spinnerMove.addClass("strp-spinner-move-skin-"+i),this._spinner.refresh(),this._spinnerSkin=i)},startObservingResize:function(){this._isObservingResize||(this._onWindowResizeHandler=this._onWindowResize.bind(this),$(window).on("resize orientationchange",this._onWindowResizeHandler),this._isObservingResize=!0)},stopObservingResize:function(){this._onWindowResizeHandler&&($(window).off("resize orientationchange",this._onWindowResizeHandler),this._onWindowResizeHandler=null),this._isObservingResize=!1},_onWindowResize:function(){var i;(i=Pages.page)&&(i.animated||i.animatingWindow?(i.fitToWindow(),i.show()):(i.fitToWindow(),this.resize(i.z,null,0),this.adjustPrevNext(null,!0)))},resize:function(i,t,e){var s="vertical"===this.getOrientation()?"Height":"Width",n=s.toLowerCase();0<i&&(this.visible=!0,this.startObservingResize());var o,h=Window.element["outer"+s]();0===h?(o=this.view.options.effects.window.show,this.element.addClass("strp-opening"),this.opening=!0):o="number"==typeof e?e:(e=(s=this.view.options.effects.transition).min,a=s.max-e,s=Bounds.viewport(),h=Math.abs(h-i),s=Math.min(1,h/s[n]),Math.round(e+s*a)),0===i&&(this.closing=!0,this.element.is(":animated")||this.element.addClass("strp-closing"));var a={overflow:"visible"};a[n]=i;var r=1;this._outerWidth=null,this._offsetLeft=null;var d=this.view.options.onResize,i="function"==typeof d;return this.element.stop(!0).animate(a,$.extend({duration:o,complete:function(){--r<1&&this._afterResize(t)}.bind(this)},i?{step:function(i,t){t.prop===n&&d.call(Strip,t.prop,i,this.side)}.bind(this)}:{})),this.spinnerMove&&(r++,this.spinnerMove.stop(!0).animate(a,o,function(){--r<1&&this._afterResize(t)}.bind(this))),o},_afterResize:function(i){this.opening=!1,this.closing=!1,this.element.removeClass("strp-opening strp-closing"),this._outerWidth=this.element.outerWidth(),this._offsetLeft=this.element.offset().left,i&&i()},adjustPrevNext:function(i,t){var e,s,n,o;this.view&&Pages.page&&(s=Pages.page,(o=this.element.is(":visible"))||this.element.show(),e=this._previous.attr("style"),this._previous.removeAttr("style"),n=parseInt(this._previous.css("margin-top")),this._previous.attr({style:e}),o||this.element.hide(),o=s.info?s.info.outerHeight():0,s=this._previous.add(this._next),n={"margin-top":n-.5*o},o=this.view.options.effects.transition.min,"number"==typeof t&&(o=t),this.opening&&(o=0),s.stop(!0).animate(n,o,i),this._previous[this.mayPrevious()?"show":"hide"](),this._next[this.mayNext()?"show":"hide"]())},resetPrevNext:function(){this._previous.add(this._next).stop(!0).removeAttr("style")},load:function(i,t){this.views=i,Pages.add(i),t&&this.setPosition(t)},setSide:function(i,t){var e;this.side!==i?this.visible?(e=this.view?this.view.options.effects.window.hide:0,this.hideUI(null,e),this.unbindUI(),this.resize(0,function(){this._safeResetsAfterSwitchSide(),Pages.hideVisibleInactive(0),this._setSide(i,t)}.bind(this)),this._showUIOnResize=!0):this._setSide(i,t):t&&t()},_setSide:function(i,t){this.side=i;var e=this.getOrientation(),s=this.element;(s=this.spinnerMove?s.add(this.spinnerMove):s).removeClass("strp-horizontal strp-vertical").addClass("strp-"+e);e="strp-side-";s.removeClass(e+"top "+e+"right "+e+"bottom "+e+"left").addClass(e+i),t&&t()},getOrientation:function(i){return"left"===this.side||"right"===this.side?"horizontal":"vertical"},startLoading:function(){this._spinner&&(this.spinnerMove.show(),this._spinner.show())},stopLoading:function(){this._spinner&&Pages.getLoadingCount()<1&&this._spinner.hide(function(){this.spinnerMove.hide()}.bind(this))},setPosition:function(t,e){this._position=t,this.view=this.views[t-1],this.stopHideQueue(),this.page=Pages.show(t,function(){var i=this.view.options.afterPosition;"function"==typeof i&&i.call(Strip,t),e&&e()}.bind(this))},hide:function(t){var i;this.view&&((i=this.queues.hide).queue([]),i.queue(function(i){Pages.stop(),i()}.bind(this)),i.queue(function(i){var t=this.view?this.view.options.effects.window.hide:0;this.unbindUI(),this.hideUI(null,t),this.unbindHideOnClickOutside(),Keyboard.disable(),i()}.bind(this)),i.queue(function(i){Pages.removeActiveClasses(),this.resize(0,i,this.view.options.effects.window.hide),this._showUIOnResize=!0}.bind(this)),i.queue(function(i){this._safeResetsAfterSwitchSide(),this.stopObservingResize(),Pages.removeAll(),this.timers.clear(),this._position=-1;var t=this.view&&this.view.options.afterHide;"function"==typeof t&&t.call(Strip),this.view=null,i()}.bind(this)),"function"==typeof t&&i.queue(function(i){t(),i()}.bind(this)))},stopHideQueue:function(){this.queues.hide.queue([])},_safeResetsAfterSwitchSide:function(){this.element.removeAttr("style"),this.spinnerMove&&this.spinnerMove.removeAttr("style"),this.visible=!1,this.hideUI(null,0),this.timers.clear("ui"),this.resetPrevNext(),this._x=-1,this._y=-1},mayPrevious:function(){return this.view&&this.view.options.loop&&this.views&&1<this.views.length||1!==this._position},previous:function(i){var t=this.mayPrevious();(i||t)&&this.setPosition(this.getSurroundingIndexes().previous)},mayNext:function(){var i=this.views&&1<this.views.length;return this.view&&this.view.options.loop&&i||i&&1!==this.getSurroundingIndexes().next},next:function(i){var t=this.mayNext();(i||t)&&this.setPosition(this.getSurroundingIndexes().next)},getSurroundingIndexes:function(){if(!this.views)return{};var i=this._position,t=this.views.length;return{previous:i<=1?t:i-1,next:t<=i?1:i+1}},bindHideOnClickOutside:function(){this.unbindHideOnClickOutside(),$(document.documentElement).on("click",this._delegateHideOutsideHandler=this._delegateHideOutside.bind(this))},unbindHideOnClickOutside:function(){this._delegateHideOutsideHandler&&($(document.documentElement).off("click",this._delegateHideOutsideHandler),this._delegateHideOutsideHandler=null)},_delegateHideOutside:function(i){var t=Pages.page;this.visible&&t&&t.view.options.hideOnClickOutside&&(i=i.target,$(i).closest(".strip, .strp-window")[0]||this.hide())},bindUI:function(){this.unbindUI(),Support.mobileTouch||(this.element.on("mouseenter",this._showUIHandler=this.showUI.bind(this)).on("mouseleave",this._hideUIHandler=this.hideUI.bind(this)),this.element.on("mousemove",this._mousemoveUIHandler=function(i){var t=i.pageX,i=i.pageY;this._hoveringNav||i===this._y&&t===this._x||(this._x=t,this._y=i,this.showUI(),this.startUITimer())}.bind(this)),this._pages.on("mousemove",".strp-container",this._onMouseMoveHandler=this._onMouseMove.bind(this)).on("mouseleave",".strp-container",this._onMouseLeaveHandler=this._onMouseLeave.bind(this)).on("mouseenter",".strp-container",this._onMouseEnterHandler=this._onMouseEnter.bind(this)),this.element.on("mouseenter",".strp-nav",this._onNavMouseEnterHandler=this._onNavMouseEnter.bind(this)).on("mouseleave",".strp-nav",this._onNavMouseLeaveHandler=this._onNavMouseLeave.bind(this)),$(window).on("scroll",this._onScrollHandler=this._onScroll.bind(this))),this._pages.on("click",".strp-container",this._onClickHandler=this._onClick.bind(this))},unbindUI:function(){this._showUIHandler&&(this.element.off("mouseenter",this._showUIHandler).off("mouseleave",this._hideUIHandler).off("mousemove",this._mousemoveUIHandler),this._pages.off("mousemove",".strp-container",this._onMouseMoveHandler).off("mouseleave",".strp-container",this._onMouseLeaveHandler).off("mouseenter",".strp-container",this._onMouseEnterHandler),this.element.off("mouseenter",".strp-nav",this._onNavMouseEnterHandler).off("mouseleave",".strp-nav",this._onNavMouseLeaveHandler),$(window).off("scroll",this._onScrollHandler),this._showUIHandler=null),this._onClickHandler&&(this._pages.off("click",".strp-container",this._onClickHandler),this._onClickHandler=null)},_onScroll:function(){this._offsetLeft=this._outerWidth=null},_onMouseMove:function(i){var t=this._getEventSide(i),i=t.toLowerCase();this.element[(this["may"+t]()?"add":"remove")+"Class"]("strp-hovering-clickable"),this._previous[("next"!==i?"add":"remove")+"Class"]("strp-nav-previous-hover strp-nav-hover"),this._next[("next"===i?"add":"remove")+"Class"]("strp-nav-next-hover strp-nav-hover")},_onMouseLeave:function(){this.element.removeClass("strp-hovering-clickable"),this._previous.removeClass("strp-nav-previous-hover").add(this._next.removeClass("strp-nav-next-hover")).removeClass("strp-nav-hover")},_onClick:function(i){var t=this._getEventSide(i);this[t.toLowerCase()](),this._onMouseMove(i)},_onMouseEnter:function(i){this._onMouseMove(i)},_getEventSide:function(i){var t=this._offsetLeft||this.element.offset().left;return i.pageX-t<.5*(this._outerWidth||this.element.outerWidth())?"Previous":"Next"},_onNavMouseEnter:function(i){this._hoveringNav=!0,this.clearUITimer()},_onNavMouseLeave:function(i){this._hoveringNav=!1,this.startUITimer()},showUI:function(i,t){this.clearUITimer();var e=this.element.find(".strp-nav-button"),s=this.view?this.view.options.effects.ui.show:0;"number"==typeof t&&(s=t),e.stop(!0).fadeTo(s,1,"stripEaseInSine",function(){this.startUITimer(),"function"==typeof i&&i()}.bind(this))},hideUI:function(i,t){var e=this.element.find(".strp-nav-button"),s=this.view?this.view.options.effects.ui.hide:0;"number"==typeof t&&(s=t),e.stop(!0).fadeOut(s,"stripEaseOutSine",function(){"function"==typeof i&&i()})},clearUITimer:function(){Support.mobileTouch||this.timers.clear("ui")},startUITimer:function(){Support.mobileTouch||(this.clearUITimer(),this.timers.set("ui",function(){this.hideUI()}.bind(this),this.view?this.view.options.uiDelay:0))}},Keyboard={enabled:!1,keyCode:{left:37,right:39,esc:27},enable:function(i){this.disable(),i&&($(document).on("keydown",this._onKeyDownHandler=this.onKeyDown.bind(this)).on("keyup",this._onKeyUpHandler=this.onKeyUp.bind(this)),this.enabled=i)},disable:function(){this.enabled=!1,this._onKeyUpHandler&&($(document).off("keyup",this._onKeyUpHandler).off("keydown",this._onKeyDownHandler),this._onKeyUpHandler=this._onKeyDownHandler=null)},onKeyDown:function(i){if(this.enabled&&Window.visible){var t=this.getKeyByKeyCode(i.keyCode);if(t&&(!this.enabled||this.enabled[t]))switch(i.preventDefault(),i.stopPropagation(),t){case"left":Window.previous();break;case"right":Window.next()}}},onKeyUp:function(i){this.enabled&&Window.visible&&(!(i=this.getKeyByKeyCode(i.keyCode))||this.enabled&&!this.enabled[i]||"esc"===i&&Window.hide())},getKeyByKeyCode:function(i){for(var t in this.keyCode)if(this.keyCode[t]===i)return t;return null}},_Strip={_disabled:!1,_fallback:!0,initialize:function(){Window.initialize(),this._disabled||this.startDelegating()},startDelegating:function(){this.stopDelegating(),$(document.documentElement).on("click",".strip[href]",this._delegateHandler=this.delegate.bind(this))},stopDelegating:function(){this._delegateHandler&&($(document.documentElement).off("click",".strip[href]",this._delegateHandler),this._delegateHandler=null)},delegate:function(i){this._disabled||(i.stopPropagation(),i.preventDefault(),i=i.currentTarget,_Strip.show(i))},show:function(object){if(this._disabled)this.showFallback.apply(_Strip,_slice.call(arguments));else{var options=arguments[1]||{},position=arguments[2];arguments[1]&&"number"==typeof arguments[1]&&(position=arguments[1],options={});var views=[],object_type,isElement=object&&1===object.nodeType,positionInAPG;switch(object_type=typeof object){case"string":case"object":var view=new View(object,options),_dgo="data-strip-group-options",elements,groupOptions,groupOptions;view.group?isElement&&(elements=$('.strip[data-strip-group="'+$(object).attr("data-strip-group")+'"]'),groupOptions={},elements.filter("["+_dgo+"]").each(function(i,element){$.extend(groupOptions,eval("({"+($(element).attr(_dgo)||"")+"})"))}),elements.each(function(i,t){position||t!==object||(position=i+1),views.push(new View(t,$.extend({},groupOptions,options)))})):(groupOptions={},isElement&&$(object).is("["+_dgo+"]")&&($.extend(groupOptions,eval("({"+($(object).attr(_dgo)||"")+"})")),view=new View(object,$.extend({},groupOptions,options))),views.push(view));break;case"array":$.each(object,function(i,t){t=new View(t,options);views.push(t)})}(!position||position<1)&&(position=1),position>views.length&&(position=views.length),Window.unbindHideOnClickOutside(),isElement&&(positionInAPG=Pages.getPositionInActivePageGroup(object))?(positionInAPG===Window._position&&Window.bindHideOnClickOutside(),Window.setPosition(positionInAPG)):Window.load(views,position)}},showFallback:function(i){!_Strip._fallback||(i=function i(t){var e=typeof t,t="string"==e?t:"array"==e&&t[0]?i(t[0]):_.isElement(t)&&$(t).attr("href")?$(t).attr("href"):t.url||!1;return t}(i))&&(window.location.href=i)}};return $.extend(Strip,{show:function(i){return _Strip.show.apply(_Strip,_slice.call(arguments)),this},hide:function(){return Window.hide(),this},disable:function(){return _Strip.stopDelegating(),_Strip._disabled=!0,this},enable:function(){return _Strip._disabled=!1,_Strip.startDelegating(),this},fallback:function(i){return _Strip._fallback=i,this},setDefaultSkin:function(i){return Options.defaults.skin=i,this}}),(Browser.IE&&Browser.IE<7||"number"==typeof Browser.Android&&Browser.Android<3||Browser.MobileSafari&&"number"==typeof Browser.WebKit&&Browser.WebKit<533.18)&&(_Strip.show=_Strip.showFallback,$.each("startDelegating stopDelegating initialize".split(" "),function(i,t){_Strip[t]=function(){}}),Strip.hide=function(){return this}),$(document).ready(function(i){_Strip.initialize()}),Strip});